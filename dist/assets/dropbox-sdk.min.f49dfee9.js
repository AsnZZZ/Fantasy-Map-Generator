var $=(l,p)=>()=>(p||l((p={exports:{}}).exports,p),p.exports);var ee=$((L,w)=>{(function(l,p){typeof L=="object"&&typeof w!="undefined"?p(L):typeof define=="function"&&define.amd?define(["exports"],p):p((l=typeof globalThis!="undefined"?globalThis:l||self).Dropbox={})})(globalThis,function(l){function p(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function M(e,r){for(var s=0;r.length>s;s++){var i=r[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,r,s){return r&&M(e.prototype,r),s&&M(e,s),e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function _(e,r){return(_=Object.setPrototypeOf||function(s,i){return s.__proto__=i,s})(e,r)}function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F(e,r,s){return(F=R()?Reflect.construct:function(i,o,n){var u=[null];u.push.apply(u,o);var a=new(Function.bind.apply(i,u));return n&&_(a,n.prototype),a}).apply(null,arguments)}function D(e){var r=typeof Map=="function"?new Map:void 0;return(D=function(s){if(s===null||Function.toString.call(s).indexOf("[native code]")===-1)return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(s))return r.get(s);r.set(s,i)}function i(){return F(s,arguments,d(this).constructor)}return i.prototype=Object.create(s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_(i,s)})(e)}function z(e,r){return!r||typeof r!="object"&&typeof r!="function"?function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(e):r}var k="app",h="user",y="team",g="dropboxapi.com",G="dropbox.com",A={api:"api",notify:"bolt",content:"api-content"},t={};function N(e){var r="000".concat(e.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(r)}t.accountSetProfilePhoto=function(e){return this.request("account/set_profile_photo",e,"user","api","rpc")},t.authTokenFromOauth1=function(e){return this.request("auth/token/from_oauth1",e,"app","api","rpc")},t.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc")},t.checkApp=function(e){return this.request("check/app",e,"app","api","rpc")},t.checkUser=function(e){return this.request("check/user",e,"user","api","rpc")},t.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc")},t.contactsDeleteManualContactsBatch=function(e){return this.request("contacts/delete_manual_contacts_batch",e,"user","api","rpc")},t.filePropertiesPropertiesAdd=function(e){return this.request("file_properties/properties/add",e,"user","api","rpc")},t.filePropertiesPropertiesOverwrite=function(e){return this.request("file_properties/properties/overwrite",e,"user","api","rpc")},t.filePropertiesPropertiesRemove=function(e){return this.request("file_properties/properties/remove",e,"user","api","rpc")},t.filePropertiesPropertiesSearch=function(e){return this.request("file_properties/properties/search",e,"user","api","rpc")},t.filePropertiesPropertiesSearchContinue=function(e){return this.request("file_properties/properties/search/continue",e,"user","api","rpc")},t.filePropertiesPropertiesUpdate=function(e){return this.request("file_properties/properties/update",e,"user","api","rpc")},t.filePropertiesTemplatesAddForTeam=function(e){return this.request("file_properties/templates/add_for_team",e,"team","api","rpc")},t.filePropertiesTemplatesAddForUser=function(e){return this.request("file_properties/templates/add_for_user",e,"user","api","rpc")},t.filePropertiesTemplatesGetForTeam=function(e){return this.request("file_properties/templates/get_for_team",e,"team","api","rpc")},t.filePropertiesTemplatesGetForUser=function(e){return this.request("file_properties/templates/get_for_user",e,"user","api","rpc")},t.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc")},t.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc")},t.filePropertiesTemplatesRemoveForTeam=function(e){return this.request("file_properties/templates/remove_for_team",e,"team","api","rpc")},t.filePropertiesTemplatesRemoveForUser=function(e){return this.request("file_properties/templates/remove_for_user",e,"user","api","rpc")},t.filePropertiesTemplatesUpdateForTeam=function(e){return this.request("file_properties/templates/update_for_team",e,"team","api","rpc")},t.filePropertiesTemplatesUpdateForUser=function(e){return this.request("file_properties/templates/update_for_user",e,"user","api","rpc")},t.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc")},t.fileRequestsCreate=function(e){return this.request("file_requests/create",e,"user","api","rpc")},t.fileRequestsDelete=function(e){return this.request("file_requests/delete",e,"user","api","rpc")},t.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc")},t.fileRequestsGet=function(e){return this.request("file_requests/get",e,"user","api","rpc")},t.fileRequestsListV2=function(e){return this.request("file_requests/list_v2",e,"user","api","rpc")},t.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc")},t.fileRequestsListContinue=function(e){return this.request("file_requests/list/continue",e,"user","api","rpc")},t.fileRequestsUpdate=function(e){return this.request("file_requests/update",e,"user","api","rpc")},t.filesAlphaGetMetadata=function(e){return this.request("files/alpha/get_metadata",e,"user","api","rpc")},t.filesAlphaUpload=function(e){return this.request("files/alpha/upload",e,"user","content","upload")},t.filesCopyV2=function(e){return this.request("files/copy_v2",e,"user","api","rpc")},t.filesCopy=function(e){return this.request("files/copy",e,"user","api","rpc")},t.filesCopyBatchV2=function(e){return this.request("files/copy_batch_v2",e,"user","api","rpc")},t.filesCopyBatch=function(e){return this.request("files/copy_batch",e,"user","api","rpc")},t.filesCopyBatchCheckV2=function(e){return this.request("files/copy_batch/check_v2",e,"user","api","rpc")},t.filesCopyBatchCheck=function(e){return this.request("files/copy_batch/check",e,"user","api","rpc")},t.filesCopyReferenceGet=function(e){return this.request("files/copy_reference/get",e,"user","api","rpc")},t.filesCopyReferenceSave=function(e){return this.request("files/copy_reference/save",e,"user","api","rpc")},t.filesCreateFolderV2=function(e){return this.request("files/create_folder_v2",e,"user","api","rpc")},t.filesCreateFolder=function(e){return this.request("files/create_folder",e,"user","api","rpc")},t.filesCreateFolderBatch=function(e){return this.request("files/create_folder_batch",e,"user","api","rpc")},t.filesCreateFolderBatchCheck=function(e){return this.request("files/create_folder_batch/check",e,"user","api","rpc")},t.filesDeleteV2=function(e){return this.request("files/delete_v2",e,"user","api","rpc")},t.filesDelete=function(e){return this.request("files/delete",e,"user","api","rpc")},t.filesDeleteBatch=function(e){return this.request("files/delete_batch",e,"user","api","rpc")},t.filesDeleteBatchCheck=function(e){return this.request("files/delete_batch/check",e,"user","api","rpc")},t.filesDownload=function(e){return this.request("files/download",e,"user","content","download")},t.filesDownloadZip=function(e){return this.request("files/download_zip",e,"user","content","download")},t.filesExport=function(e){return this.request("files/export",e,"user","content","download")},t.filesGetFileLockBatch=function(e){return this.request("files/get_file_lock_batch",e,"user","api","rpc")},t.filesGetMetadata=function(e){return this.request("files/get_metadata",e,"user","api","rpc")},t.filesGetPreview=function(e){return this.request("files/get_preview",e,"user","content","download")},t.filesGetTemporaryLink=function(e){return this.request("files/get_temporary_link",e,"user","api","rpc")},t.filesGetTemporaryUploadLink=function(e){return this.request("files/get_temporary_upload_link",e,"user","api","rpc")},t.filesGetThumbnail=function(e){return this.request("files/get_thumbnail",e,"user","content","download")},t.filesGetThumbnailV2=function(e){return this.request("files/get_thumbnail_v2",e,"app, user","content","download")},t.filesGetThumbnailBatch=function(e){return this.request("files/get_thumbnail_batch",e,"user","content","rpc")},t.filesListFolder=function(e){return this.request("files/list_folder",e,"user","api","rpc")},t.filesListFolderContinue=function(e){return this.request("files/list_folder/continue",e,"user","api","rpc")},t.filesListFolderGetLatestCursor=function(e){return this.request("files/list_folder/get_latest_cursor",e,"user","api","rpc")},t.filesListFolderLongpoll=function(e){return this.request("files/list_folder/longpoll",e,"noauth","notify","rpc")},t.filesListRevisions=function(e){return this.request("files/list_revisions",e,"user","api","rpc")},t.filesLockFileBatch=function(e){return this.request("files/lock_file_batch",e,"user","api","rpc")},t.filesMoveV2=function(e){return this.request("files/move_v2",e,"user","api","rpc")},t.filesMove=function(e){return this.request("files/move",e,"user","api","rpc")},t.filesMoveBatchV2=function(e){return this.request("files/move_batch_v2",e,"user","api","rpc")},t.filesMoveBatch=function(e){return this.request("files/move_batch",e,"user","api","rpc")},t.filesMoveBatchCheckV2=function(e){return this.request("files/move_batch/check_v2",e,"user","api","rpc")},t.filesMoveBatchCheck=function(e){return this.request("files/move_batch/check",e,"user","api","rpc")},t.filesPaperCreate=function(e){return this.request("files/paper/create",e,"user","api","upload")},t.filesPaperUpdate=function(e){return this.request("files/paper/update",e,"user","api","upload")},t.filesPermanentlyDelete=function(e){return this.request("files/permanently_delete",e,"user","api","rpc")},t.filesPropertiesAdd=function(e){return this.request("files/properties/add",e,"user","api","rpc")},t.filesPropertiesOverwrite=function(e){return this.request("files/properties/overwrite",e,"user","api","rpc")},t.filesPropertiesRemove=function(e){return this.request("files/properties/remove",e,"user","api","rpc")},t.filesPropertiesTemplateGet=function(e){return this.request("files/properties/template/get",e,"user","api","rpc")},t.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc")},t.filesPropertiesUpdate=function(e){return this.request("files/properties/update",e,"user","api","rpc")},t.filesRestore=function(e){return this.request("files/restore",e,"user","api","rpc")},t.filesSaveUrl=function(e){return this.request("files/save_url",e,"user","api","rpc")},t.filesSaveUrlCheckJobStatus=function(e){return this.request("files/save_url/check_job_status",e,"user","api","rpc")},t.filesSearch=function(e){return this.request("files/search",e,"user","api","rpc")},t.filesSearchV2=function(e){return this.request("files/search_v2",e,"user","api","rpc")},t.filesSearchContinueV2=function(e){return this.request("files/search/continue_v2",e,"user","api","rpc")},t.filesUnlockFileBatch=function(e){return this.request("files/unlock_file_batch",e,"user","api","rpc")},t.filesUpload=function(e){return this.request("files/upload",e,"user","content","upload")},t.filesUploadSessionAppendV2=function(e){return this.request("files/upload_session/append_v2",e,"user","content","upload")},t.filesUploadSessionAppend=function(e){return this.request("files/upload_session/append",e,"user","content","upload")},t.filesUploadSessionFinish=function(e){return this.request("files/upload_session/finish",e,"user","content","upload")},t.filesUploadSessionFinishBatch=function(e){return this.request("files/upload_session/finish_batch",e,"user","api","rpc")},t.filesUploadSessionFinishBatchCheck=function(e){return this.request("files/upload_session/finish_batch/check",e,"user","api","rpc")},t.filesUploadSessionStart=function(e){return this.request("files/upload_session/start",e,"user","content","upload")},t.paperDocsArchive=function(e){return this.request("paper/docs/archive",e,"user","api","rpc")},t.paperDocsCreate=function(e){return this.request("paper/docs/create",e,"user","api","upload")},t.paperDocsDownload=function(e){return this.request("paper/docs/download",e,"user","api","download")},t.paperDocsFolderUsersList=function(e){return this.request("paper/docs/folder_users/list",e,"user","api","rpc")},t.paperDocsFolderUsersListContinue=function(e){return this.request("paper/docs/folder_users/list/continue",e,"user","api","rpc")},t.paperDocsGetFolderInfo=function(e){return this.request("paper/docs/get_folder_info",e,"user","api","rpc")},t.paperDocsList=function(e){return this.request("paper/docs/list",e,"user","api","rpc")},t.paperDocsListContinue=function(e){return this.request("paper/docs/list/continue",e,"user","api","rpc")},t.paperDocsPermanentlyDelete=function(e){return this.request("paper/docs/permanently_delete",e,"user","api","rpc")},t.paperDocsSharingPolicyGet=function(e){return this.request("paper/docs/sharing_policy/get",e,"user","api","rpc")},t.paperDocsSharingPolicySet=function(e){return this.request("paper/docs/sharing_policy/set",e,"user","api","rpc")},t.paperDocsUpdate=function(e){return this.request("paper/docs/update",e,"user","api","upload")},t.paperDocsUsersAdd=function(e){return this.request("paper/docs/users/add",e,"user","api","rpc")},t.paperDocsUsersList=function(e){return this.request("paper/docs/users/list",e,"user","api","rpc")},t.paperDocsUsersListContinue=function(e){return this.request("paper/docs/users/list/continue",e,"user","api","rpc")},t.paperDocsUsersRemove=function(e){return this.request("paper/docs/users/remove",e,"user","api","rpc")},t.paperFoldersCreate=function(e){return this.request("paper/folders/create",e,"user","api","rpc")},t.sharingAddFileMember=function(e){return this.request("sharing/add_file_member",e,"user","api","rpc")},t.sharingAddFolderMember=function(e){return this.request("sharing/add_folder_member",e,"user","api","rpc")},t.sharingCheckJobStatus=function(e){return this.request("sharing/check_job_status",e,"user","api","rpc")},t.sharingCheckRemoveMemberJobStatus=function(e){return this.request("sharing/check_remove_member_job_status",e,"user","api","rpc")},t.sharingCheckShareJobStatus=function(e){return this.request("sharing/check_share_job_status",e,"user","api","rpc")},t.sharingCreateSharedLink=function(e){return this.request("sharing/create_shared_link",e,"user","api","rpc")},t.sharingCreateSharedLinkWithSettings=function(e){return this.request("sharing/create_shared_link_with_settings",e,"user","api","rpc")},t.sharingGetFileMetadata=function(e){return this.request("sharing/get_file_metadata",e,"user","api","rpc")},t.sharingGetFileMetadataBatch=function(e){return this.request("sharing/get_file_metadata/batch",e,"user","api","rpc")},t.sharingGetFolderMetadata=function(e){return this.request("sharing/get_folder_metadata",e,"user","api","rpc")},t.sharingGetSharedLinkFile=function(e){return this.request("sharing/get_shared_link_file",e,"user","content","download")},t.sharingGetSharedLinkMetadata=function(e){return this.request("sharing/get_shared_link_metadata",e,"user","api","rpc")},t.sharingGetSharedLinks=function(e){return this.request("sharing/get_shared_links",e,"user","api","rpc")},t.sharingListFileMembers=function(e){return this.request("sharing/list_file_members",e,"user","api","rpc")},t.sharingListFileMembersBatch=function(e){return this.request("sharing/list_file_members/batch",e,"user","api","rpc")},t.sharingListFileMembersContinue=function(e){return this.request("sharing/list_file_members/continue",e,"user","api","rpc")},t.sharingListFolderMembers=function(e){return this.request("sharing/list_folder_members",e,"user","api","rpc")},t.sharingListFolderMembersContinue=function(e){return this.request("sharing/list_folder_members/continue",e,"user","api","rpc")},t.sharingListFolders=function(e){return this.request("sharing/list_folders",e,"user","api","rpc")},t.sharingListFoldersContinue=function(e){return this.request("sharing/list_folders/continue",e,"user","api","rpc")},t.sharingListMountableFolders=function(e){return this.request("sharing/list_mountable_folders",e,"user","api","rpc")},t.sharingListMountableFoldersContinue=function(e){return this.request("sharing/list_mountable_folders/continue",e,"user","api","rpc")},t.sharingListReceivedFiles=function(e){return this.request("sharing/list_received_files",e,"user","api","rpc")},t.sharingListReceivedFilesContinue=function(e){return this.request("sharing/list_received_files/continue",e,"user","api","rpc")},t.sharingListSharedLinks=function(e){return this.request("sharing/list_shared_links",e,"user","api","rpc")},t.sharingModifySharedLinkSettings=function(e){return this.request("sharing/modify_shared_link_settings",e,"user","api","rpc")},t.sharingMountFolder=function(e){return this.request("sharing/mount_folder",e,"user","api","rpc")},t.sharingRelinquishFileMembership=function(e){return this.request("sharing/relinquish_file_membership",e,"user","api","rpc")},t.sharingRelinquishFolderMembership=function(e){return this.request("sharing/relinquish_folder_membership",e,"user","api","rpc")},t.sharingRemoveFileMember=function(e){return this.request("sharing/remove_file_member",e,"user","api","rpc")},t.sharingRemoveFileMember2=function(e){return this.request("sharing/remove_file_member_2",e,"user","api","rpc")},t.sharingRemoveFolderMember=function(e){return this.request("sharing/remove_folder_member",e,"user","api","rpc")},t.sharingRevokeSharedLink=function(e){return this.request("sharing/revoke_shared_link",e,"user","api","rpc")},t.sharingSetAccessInheritance=function(e){return this.request("sharing/set_access_inheritance",e,"user","api","rpc")},t.sharingShareFolder=function(e){return this.request("sharing/share_folder",e,"user","api","rpc")},t.sharingTransferFolder=function(e){return this.request("sharing/transfer_folder",e,"user","api","rpc")},t.sharingUnmountFolder=function(e){return this.request("sharing/unmount_folder",e,"user","api","rpc")},t.sharingUnshareFile=function(e){return this.request("sharing/unshare_file",e,"user","api","rpc")},t.sharingUnshareFolder=function(e){return this.request("sharing/unshare_folder",e,"user","api","rpc")},t.sharingUpdateFileMember=function(e){return this.request("sharing/update_file_member",e,"user","api","rpc")},t.sharingUpdateFolderMember=function(e){return this.request("sharing/update_folder_member",e,"user","api","rpc")},t.sharingUpdateFolderPolicy=function(e){return this.request("sharing/update_folder_policy",e,"user","api","rpc")},t.teamDevicesListMemberDevices=function(e){return this.request("team/devices/list_member_devices",e,"team","api","rpc")},t.teamDevicesListMembersDevices=function(e){return this.request("team/devices/list_members_devices",e,"team","api","rpc")},t.teamDevicesListTeamDevices=function(e){return this.request("team/devices/list_team_devices",e,"team","api","rpc")},t.teamDevicesRevokeDeviceSession=function(e){return this.request("team/devices/revoke_device_session",e,"team","api","rpc")},t.teamDevicesRevokeDeviceSessionBatch=function(e){return this.request("team/devices/revoke_device_session_batch",e,"team","api","rpc")},t.teamFeaturesGetValues=function(e){return this.request("team/features/get_values",e,"team","api","rpc")},t.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc")},t.teamGroupsCreate=function(e){return this.request("team/groups/create",e,"team","api","rpc")},t.teamGroupsDelete=function(e){return this.request("team/groups/delete",e,"team","api","rpc")},t.teamGroupsGetInfo=function(e){return this.request("team/groups/get_info",e,"team","api","rpc")},t.teamGroupsJobStatusGet=function(e){return this.request("team/groups/job_status/get",e,"team","api","rpc")},t.teamGroupsList=function(e){return this.request("team/groups/list",e,"team","api","rpc")},t.teamGroupsListContinue=function(e){return this.request("team/groups/list/continue",e,"team","api","rpc")},t.teamGroupsMembersAdd=function(e){return this.request("team/groups/members/add",e,"team","api","rpc")},t.teamGroupsMembersList=function(e){return this.request("team/groups/members/list",e,"team","api","rpc")},t.teamGroupsMembersListContinue=function(e){return this.request("team/groups/members/list/continue",e,"team","api","rpc")},t.teamGroupsMembersRemove=function(e){return this.request("team/groups/members/remove",e,"team","api","rpc")},t.teamGroupsMembersSetAccessType=function(e){return this.request("team/groups/members/set_access_type",e,"team","api","rpc")},t.teamGroupsUpdate=function(e){return this.request("team/groups/update",e,"team","api","rpc")},t.teamLegalHoldsCreatePolicy=function(e){return this.request("team/legal_holds/create_policy",e,"team","api","rpc")},t.teamLegalHoldsGetPolicy=function(e){return this.request("team/legal_holds/get_policy",e,"team","api","rpc")},t.teamLegalHoldsListHeldRevisions=function(e){return this.request("team/legal_holds/list_held_revisions",e,"team","api","rpc")},t.teamLegalHoldsListHeldRevisionsContinue=function(e){return this.request("team/legal_holds/list_held_revisions_continue",e,"team","api","rpc")},t.teamLegalHoldsListPolicies=function(e){return this.request("team/legal_holds/list_policies",e,"team","api","rpc")},t.teamLegalHoldsReleasePolicy=function(e){return this.request("team/legal_holds/release_policy",e,"team","api","rpc")},t.teamLegalHoldsUpdatePolicy=function(e){return this.request("team/legal_holds/update_policy",e,"team","api","rpc")},t.teamLinkedAppsListMemberLinkedApps=function(e){return this.request("team/linked_apps/list_member_linked_apps",e,"team","api","rpc")},t.teamLinkedAppsListMembersLinkedApps=function(e){return this.request("team/linked_apps/list_members_linked_apps",e,"team","api","rpc")},t.teamLinkedAppsListTeamLinkedApps=function(e){return this.request("team/linked_apps/list_team_linked_apps",e,"team","api","rpc")},t.teamLinkedAppsRevokeLinkedApp=function(e){return this.request("team/linked_apps/revoke_linked_app",e,"team","api","rpc")},t.teamLinkedAppsRevokeLinkedAppBatch=function(e){return this.request("team/linked_apps/revoke_linked_app_batch",e,"team","api","rpc")},t.teamMemberSpaceLimitsExcludedUsersAdd=function(e){return this.request("team/member_space_limits/excluded_users/add",e,"team","api","rpc")},t.teamMemberSpaceLimitsExcludedUsersList=function(e){return this.request("team/member_space_limits/excluded_users/list",e,"team","api","rpc")},t.teamMemberSpaceLimitsExcludedUsersListContinue=function(e){return this.request("team/member_space_limits/excluded_users/list/continue",e,"team","api","rpc")},t.teamMemberSpaceLimitsExcludedUsersRemove=function(e){return this.request("team/member_space_limits/excluded_users/remove",e,"team","api","rpc")},t.teamMemberSpaceLimitsGetCustomQuota=function(e){return this.request("team/member_space_limits/get_custom_quota",e,"team","api","rpc")},t.teamMemberSpaceLimitsRemoveCustomQuota=function(e){return this.request("team/member_space_limits/remove_custom_quota",e,"team","api","rpc")},t.teamMemberSpaceLimitsSetCustomQuota=function(e){return this.request("team/member_space_limits/set_custom_quota",e,"team","api","rpc")},t.teamMembersAddV2=function(e){return this.request("team/members/add_v2",e,"team","api","rpc")},t.teamMembersAdd=function(e){return this.request("team/members/add",e,"team","api","rpc")},t.teamMembersAddJobStatusGetV2=function(e){return this.request("team/members/add/job_status/get_v2",e,"team","api","rpc")},t.teamMembersAddJobStatusGet=function(e){return this.request("team/members/add/job_status/get",e,"team","api","rpc")},t.teamMembersDeleteProfilePhotoV2=function(e){return this.request("team/members/delete_profile_photo_v2",e,"team","api","rpc")},t.teamMembersDeleteProfilePhoto=function(e){return this.request("team/members/delete_profile_photo",e,"team","api","rpc")},t.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc")},t.teamMembersGetInfoV2=function(e){return this.request("team/members/get_info_v2",e,"team","api","rpc")},t.teamMembersGetInfo=function(e){return this.request("team/members/get_info",e,"team","api","rpc")},t.teamMembersListV2=function(e){return this.request("team/members/list_v2",e,"team","api","rpc")},t.teamMembersList=function(e){return this.request("team/members/list",e,"team","api","rpc")},t.teamMembersListContinueV2=function(e){return this.request("team/members/list/continue_v2",e,"team","api","rpc")},t.teamMembersListContinue=function(e){return this.request("team/members/list/continue",e,"team","api","rpc")},t.teamMembersMoveFormerMemberFiles=function(e){return this.request("team/members/move_former_member_files",e,"team","api","rpc")},t.teamMembersMoveFormerMemberFilesJobStatusCheck=function(e){return this.request("team/members/move_former_member_files/job_status/check",e,"team","api","rpc")},t.teamMembersRecover=function(e){return this.request("team/members/recover",e,"team","api","rpc")},t.teamMembersRemove=function(e){return this.request("team/members/remove",e,"team","api","rpc")},t.teamMembersRemoveJobStatusGet=function(e){return this.request("team/members/remove/job_status/get",e,"team","api","rpc")},t.teamMembersSecondaryEmailsAdd=function(e){return this.request("team/members/secondary_emails/add",e,"team","api","rpc")},t.teamMembersSecondaryEmailsDelete=function(e){return this.request("team/members/secondary_emails/delete",e,"team","api","rpc")},t.teamMembersSecondaryEmailsResendVerificationEmails=function(e){return this.request("team/members/secondary_emails/resend_verification_emails",e,"team","api","rpc")},t.teamMembersSendWelcomeEmail=function(e){return this.request("team/members/send_welcome_email",e,"team","api","rpc")},t.teamMembersSetAdminPermissionsV2=function(e){return this.request("team/members/set_admin_permissions_v2",e,"team","api","rpc")},t.teamMembersSetAdminPermissions=function(e){return this.request("team/members/set_admin_permissions",e,"team","api","rpc")},t.teamMembersSetProfileV2=function(e){return this.request("team/members/set_profile_v2",e,"team","api","rpc")},t.teamMembersSetProfile=function(e){return this.request("team/members/set_profile",e,"team","api","rpc")},t.teamMembersSetProfilePhotoV2=function(e){return this.request("team/members/set_profile_photo_v2",e,"team","api","rpc")},t.teamMembersSetProfilePhoto=function(e){return this.request("team/members/set_profile_photo",e,"team","api","rpc")},t.teamMembersSuspend=function(e){return this.request("team/members/suspend",e,"team","api","rpc")},t.teamMembersUnsuspend=function(e){return this.request("team/members/unsuspend",e,"team","api","rpc")},t.teamNamespacesList=function(e){return this.request("team/namespaces/list",e,"team","api","rpc")},t.teamNamespacesListContinue=function(e){return this.request("team/namespaces/list/continue",e,"team","api","rpc")},t.teamPropertiesTemplateAdd=function(e){return this.request("team/properties/template/add",e,"team","api","rpc")},t.teamPropertiesTemplateGet=function(e){return this.request("team/properties/template/get",e,"team","api","rpc")},t.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc")},t.teamPropertiesTemplateUpdate=function(e){return this.request("team/properties/template/update",e,"team","api","rpc")},t.teamReportsGetActivity=function(e){return this.request("team/reports/get_activity",e,"team","api","rpc")},t.teamReportsGetDevices=function(e){return this.request("team/reports/get_devices",e,"team","api","rpc")},t.teamReportsGetMembership=function(e){return this.request("team/reports/get_membership",e,"team","api","rpc")},t.teamReportsGetStorage=function(e){return this.request("team/reports/get_storage",e,"team","api","rpc")},t.teamTeamFolderActivate=function(e){return this.request("team/team_folder/activate",e,"team","api","rpc")},t.teamTeamFolderArchive=function(e){return this.request("team/team_folder/archive",e,"team","api","rpc")},t.teamTeamFolderArchiveCheck=function(e){return this.request("team/team_folder/archive/check",e,"team","api","rpc")},t.teamTeamFolderCreate=function(e){return this.request("team/team_folder/create",e,"team","api","rpc")},t.teamTeamFolderGetInfo=function(e){return this.request("team/team_folder/get_info",e,"team","api","rpc")},t.teamTeamFolderList=function(e){return this.request("team/team_folder/list",e,"team","api","rpc")},t.teamTeamFolderListContinue=function(e){return this.request("team/team_folder/list/continue",e,"team","api","rpc")},t.teamTeamFolderPermanentlyDelete=function(e){return this.request("team/team_folder/permanently_delete",e,"team","api","rpc")},t.teamTeamFolderRename=function(e){return this.request("team/team_folder/rename",e,"team","api","rpc")},t.teamTeamFolderUpdateSyncSettings=function(e){return this.request("team/team_folder/update_sync_settings",e,"team","api","rpc")},t.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc")},t.teamLogGetEvents=function(e){return this.request("team_log/get_events",e,"team","api","rpc")},t.teamLogGetEventsContinue=function(e){return this.request("team_log/get_events/continue",e,"team","api","rpc")},t.usersFeaturesGetValues=function(e){return this.request("users/features/get_values",e,"user","api","rpc")},t.usersGetAccount=function(e){return this.request("users/get_account",e,"user","api","rpc")},t.usersGetAccountBatch=function(e){return this.request("users/get_account_batch",e,"user","api","rpc")},t.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc")},t.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc")};var C=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r!==g&&A[e]!==void 0&&(e=A[e],s="-"),"https://".concat(e).concat(s).concat(r,"/2/")},W=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G;return e!==G&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},U=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",s="api";return e!==g&&(s=A[s],r="-"),"https://".concat(s).concat(r).concat(e,"/oauth2/token")};function E(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,N)}function Y(e){return new Date(Date.now()+1e3*e)}function x(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope||typeof w=="undefined"||typeof window!="undefined"}function q(){return typeof window!="undefined"}function b(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var V,m,B,I=function(e){(function(n,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(u&&u.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),u&&_(n,u)})(o,e);var r,s,i=(r=o,s=R(),function(){var n,u=d(r);if(s){var a=d(this).constructor;n=Reflect.construct(u,arguments,a)}else n=u.apply(this,arguments);return z(this,n)});function o(n,u,a){var c;return p(this,o),(c=i.call(this,"Response failed with a ".concat(n," code"))).name="DropboxResponseError",c.status=n,c.headers=u,c.error=a,c}return o}(D(Error)),S=function e(r,s,i){p(this,e),this.status=r,this.headers=s,this.result=i};function O(e){return e.text().then(function(r){var s;try{s=JSON.parse(r)}catch{s=r}throw new I(e.status,e.headers,s)})}function v(e){return e.ok?e.text().then(function(r){var s;try{s=JSON.parse(r)}catch{s=r}return new S(e.status,e.headers,s)}):O(e)}V=q()?window.fetch.bind(window):require("node-fetch"),m=q()?window.crypto||window.msCrypto:require("crypto"),B=typeof TextEncoder=="undefined"?require("util").TextEncoder:TextEncoder;var j,K=["legacy","offline","online"],Q=["code","token"],Z=["none","user","team"],H=function(){function e(r){p(this,e),this.fetch=(r=r||{}).fetch||V,this.accessToken=r.accessToken,this.accessTokenExpiresAt=r.accessTokenExpiresAt,this.refreshToken=r.refreshToken,this.clientId=r.clientId,this.clientSecret=r.clientSecret,this.domain=r.domain,this.domainDelimiter=r.domainDelimiter}return P(e,[{key:"setAccessToken",value:function(r){this.accessToken=r}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(r){this.clientId=r}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(r){this.clientSecret=r}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(r){this.refreshToken=r}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(r){this.accessTokenExpiresAt=r}},{key:"setCodeVerifier",value:function(r){this.codeVerifier=r}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var r,s=this,i=new B().encode(this.codeVerifier);if(q())return m.subtle.digest("SHA-256",i).then(function(n){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(n)));r=b(u).substr(0,128),s.codeChallenge=r});var o=m.createHash("sha256").update(i).digest();return r=b(o),this.codeChallenge=r,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var r;if(q()){var s=new Uint8Array(128),i=m.getRandomValues(s);r=b(btoa(i)).substr(0,128)}else r=b(m.randomBytes(128)).substr(0,128);return this.codeVerifier=r,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(r,s){var i,o=this,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",f=arguments.length>6&&arguments[6]!==void 0&&arguments[6],T=this.getClientId(),J=W(this.domain);if(!T)throw Error("A client id is required. You can set the client id using .setClientId().");if(n!=="code"&&!r)throw Error("A redirect uri is required.");if(!Q.includes(n))throw Error("Authorization type must be code or token");if(u&&!K.includes(u))throw Error("Token Access Type must be legacy, offline, or online");if(a&&!(a instanceof Array))throw Error("Scope must be an array of strings");if(!Z.includes(c))throw Error("includeGrantedScopes must be none, user, or team");return i=n==="code"?"".concat(J,"?response_type=code&client_id=").concat(T):"".concat(J,"?response_type=token&client_id=").concat(T),r&&(i+="&redirect_uri=".concat(r)),s&&(i+="&state=".concat(s)),u&&(i+="&token_access_type=".concat(u)),a&&(i+="&scope=".concat(a.join(" "))),c!=="none"&&(i+="&include_granted_scopes=".concat(c)),f?this.generatePKCECodes().then(function(){return i+="&code_challenge_method=S256",i+="&code_challenge=".concat(o.codeChallenge)}):Promise.resolve(i)}},{key:"getAccessTokenFromCode",value:function(r,s){var i=this.getClientId(),o=this.getClientSecret();if(!i)throw Error("A client id is required. You can set the client id using .setClientId().");var n=U(this.domain,this.domainDelimiter);if(n+="?grant_type=authorization_code",n+="&code=".concat(s),n+="&client_id=".concat(i),o)n+="&client_secret=".concat(o);else{if(!this.codeVerifier)throw Error("You must use PKCE when generating the authorization URL to not include a client secret");n+="&code_verifier=".concat(this.codeVerifier)}return r&&(n+="&redirect_uri=".concat(r)),this.fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(u){return v(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var r=this.getRefreshToken()&&this.getClientId(),s=!this.getAccessTokenExpiresAt()||new Date(Date.now()+3e5)>=this.getAccessTokenExpiresAt(),i=!this.getAccessToken();return(s||i)&&r?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=U(this.domain,this.domainDelimiter),o=this.getClientId(),n=this.getClientSecret();if(!o)throw Error("A client id is required. You can set the client id using .setClientId().");if(s&&!(s instanceof Array))throw Error("Scope must be an array of strings");var u={"Content-Type":"application/json"};i+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),i+="&client_id=".concat(o),n&&(i+="&client_secret=".concat(n)),s&&(i+="&scope=".concat(s.join(" ")));var a={method:"POST"};return a.headers=u,this.fetch(i,a).then(function(c){return v(c)}).then(function(c){r.setAccessToken(c.result.access_token),r.setAccessTokenExpiresAt(Y(c.result.expires_in))})}}]),e}();j=typeof window!="undefined"?window.fetch.bind(window):require("node-fetch");var X=typeof btoa=="undefined"?function(e){return Buffer.from(e).toString("base64")}:btoa;l.Dropbox=function(){function e(r){p(this,e),this.auth=(r=r||{}).auth?r.auth:new H(r),this.fetch=r.fetch||j,this.selectUser=r.selectUser,this.selectAdmin=r.selectAdmin,this.pathRoot=r.pathRoot,this.domain=r.domain,this.domainDelimiter=r.domainDelimiter,Object.assign(this,t)}return P(e,[{key:"request",value:function(r,s,i,o,n){if(i.split(",").length>1){var u=i.replace(" ","").split(",");u.includes(h)&&this.auth.getAccessToken()?i=h:u.includes(y)&&this.auth.getAccessToken()?i=y:u.includes(k)&&(i=k)}switch(n){case"rpc":return this.rpcRequest(r,s,i,o);case"download":return this.downloadRequest(r,s,i,o);case"upload":return this.uploadRequest(r,s,i,o);default:throw Error("Invalid request style: ".concat(n))}}},{key:"rpcRequest",value:function(r,s,i,o){var n=this;return this.auth.checkAndRefreshAccessToken().then(function(){var u,a={method:"POST",body:s?JSON.stringify(s):null,headers:{}};switch(s&&(a.headers["Content-Type"]="application/json"),i){case k:if(!n.auth.clientId||!n.auth.clientSecret)throw Error("A client id and secret is required for this function");u=X("".concat(n.auth.clientId,":").concat(n.auth.clientSecret)),a.headers.Authorization="Basic ".concat(u);break;case y:case h:a.headers.Authorization="Bearer ".concat(n.auth.getAccessToken());break;case"noauth":break;default:throw Error("Unhandled auth type: ".concat(i))}return n.setCommonHeaders(a),a}).then(function(u){return n.fetch(C(o,n.domain,n.domainDelimiter)+r,u)}).then(function(u){return v(u)})}},{key:"downloadRequest",value:function(r,s,i,o){var n=this;return this.auth.checkAndRefreshAccessToken().then(function(){if(i!==h)throw Error("Unexpected auth type: ".concat(i));var u={method:"POST",headers:{Authorization:"Bearer ".concat(n.auth.getAccessToken()),"Dropbox-API-Arg":E(s)}};return n.setCommonHeaders(u),u}).then(function(u){return n.fetch(C(o,n.domain,n.domainDelimiter)+r,u)}).then(function(u){return function(a){return a.ok?new Promise(function(c){x()?a.blob().then(function(f){return c(f)}):a.buffer().then(function(f){return c(f)})}).then(function(c){var f=JSON.parse(a.headers.get("dropbox-api-result"));return x()?f.fileBlob=c:f.fileBinary=c,new S(a.status,a.headers,f)}):O(a)}(u)})}},{key:"uploadRequest",value:function(r,s,i,o){var n=this;return this.auth.checkAndRefreshAccessToken().then(function(){if(i!==h)throw Error("Unexpected auth type: ".concat(i));var u=s.contents;delete s.contents;var a={body:u,method:"POST",headers:{Authorization:"Bearer ".concat(n.auth.getAccessToken()),"Content-Type":"application/octet-stream","Dropbox-API-Arg":E(s)}};return n.setCommonHeaders(a),a}).then(function(u){return n.fetch(C(o,n.domain,n.domainDelimiter)+r,u)}).then(function(u){return v(u)})}},{key:"setCommonHeaders",value:function(r){this.selectUser&&(r.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(r.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(r.headers["Dropbox-API-Path-Root"]=this.pathRoot)}}]),e}(),l.DropboxAuth=H,l.DropboxResponse=S,l.DropboxResponseError=I,Object.defineProperty(l,"__esModule",{value:!0})})});export default ee();
